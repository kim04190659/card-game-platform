# API切り替え機能の使い方

## 概要
モックAPI（無料）と本番API（Anthropic Claude・課金）を簡単に切り替えられます。

## 使い方

### 1. ゲーム選択画面で切り替え
- ゲーム選択画面の右上に「API モード切り替え」スイッチが表示されます
- デフォルトは「🤖 モックAPI（無料）」

### 2. 本番APIへの切り替え
1. チェックボックスをONにする
2. 確認ダイアログで「OK」をクリック
3. 「✨ 本番API（課金あり）」に変わる
4. 警告メッセージが表示される

### 3. テスト後は必ずOFFに戻す
- テスト完了後、チェックボックスをOFFにする
- 「🤖 モックAPI」に戻ることを確認

## コスト目安

| 操作 | トークン数 | コスト |
|------|----------|--------|
| 成果物生成 | 入力1,000 + 出力3,000 | 約$0.05 |
| 評価 | 入力2,000 + 出力1,000 | 約$0.04 |
| **合計（1ゲーム）** | - | **約$0.09** |

## 安全機能

1. **デフォルトはモックAPI**: 意図しない課金を防止
2. **確認ダイアログ**: 本番API有効化時に警告
3. **視覚的な警告**: 赤色表示で本番モードを明示
4. **コンソールログ**: 開発者ツールで現在のモードを確認可能

## トラブルシューティング

### 本番APIが動かない
1. Vercelの環境変数 `ANTHROPIC_API_KEY` が設定されているか確認
2. ブラウザのコンソールでエラーメッセージを確認
3. APIキーの有効期限を確認

### 課金が心配
1. Anthropic Console (https://console.anthropic.com/) で使用量を確認
2. 使用量アラートを設定（推奨: $10）
3. 基本はモックAPIで運用、デモ時のみ本番API

## 注意事項

⚠️ **本番APIは必ず必要な時だけ使用してください**
⚠️ **テスト後は必ずモックAPIに戻してください**
⚠️ **学生に使わせる場合は、モックAPIのみにしてください**
